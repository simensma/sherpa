{% extends 'common/admin/layout.html' %}
{% block title %}Brukere &mdash; {{ block.super }}{% endblock %}
{% block header %}<a href="{% url admin.users.views.index %}">Brukere</a>{% endblock %}

{% block extra_js %}
  <script src="{{ STATIC_URL }}js/admin/user_search.js"></script>
  <script src="{{ STATIC_URL }}js/admin/users.js"></script>
{% endblock %}

{% block js_globals %}
  <script>
    var password_length = {{ password_length }};
  </script>
{% endblock %}

{% block body %}

<div class="row">
  <div class="span12">
    <h2>Finn brukere/medlemmer</h2>
  </div>
</div>

<div class="row">
  <div class="span6">
    <input type="text" name="user-search" class="input-xlarge" placeholder="Navn eller medlemsnummer">
    <button class="btn input-button-align"><i class="icon-search"></i></button>
  </div>

  <div class="span6">
  </div>
</div>

<div class="row">
  <div class="span12">
    <table class="table user-search-list">
      <tr>
        <th>Navn</th>
        <th>Epost</th>
        <th>Telefon</th>
      </tr>

      <tr class="initial">
        <td colspan="3">Søk etter medlemmer/brukere i søkeboksen over...</td>
      </tr>

      <tr class="no-hits hide">
        <td colspan="3">Fant ingen med navn eller medlemsnummer <span class="result-mirror"></span>.</td>
      </tr>

      <tr class="loader hide">
        <td colspan="3"><img src="{{ STATIC_URL }}img/ajax-loader-large.gif" alt="Laster, vennligst vent..."></td>
      </tr>
    </table>
  </div>
</div>

<div class="row">
  <div class="span12">
    <h2>Opprett ny bruker</h2>
  </div>
</div>

<div class="row">
  <div class="span6">
    <form action="{% url admin.users.views.new %}" method="post" class="form-border">
      {% csrf_token %}
      <div class="control-group name">
        <label>Fullt navn</label>
        <input type="text" class="input-large" name="name">
      </div>
      <div class="control-group email">
        <label> E-post</label>
        <input type="text" class="input-large" name="email">
      </div>
      <div class="control-group password">
        <label>Passord</label>
        <input type="password" class="input-large" name="password">
      </div>
      <div class="control-group password-duplicate">
        <label>Gjenta passord</label>
        <input type="password" class="input-large" name="password-duplicate">
      </div>
      <button type="submit" class="btn btn-large"><i class="icon-user"></i> Lagre bruker</button>
    </form>
  </div>
  <div class="span6 info-area">
    {% for message in messages %}
      {% if message.message == 'value_error' %}
        <div class="alert alert-error">
          <a class="close">x</a>
          <strong>Vennligst fyll inn både navn, en gyldig e-post adresse, og et passord på minst {{ password_length }} tegn.</strong>
        </div>
      {% elif message.message == 'integrity_error' %}
        <div class="alert alert-error">
          <a class="close">x</a>
          <strong>E-postadressen er allerede i bruk!</strong><br>
          Er du sikker på at du ikke allerede har en registrert bruker? Hvis du har glemt passordet ditt, kan du opprette et nytt ved å trykke "Glemt passord"-linken på <a href="{% url user.login.views.login %}">login-siden</a>.</strong>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% endblock %}
