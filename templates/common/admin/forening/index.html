{% extends 'common/admin/layout.html' %}

{% block title %}{{ active_forening.name }} — {{ block.super }}{% endblock %}

{% block admin_menu %}{% with 'forening' as active_entry %}{{ block.super }}{% endwith %}{% endblock %}

{% block extra_js %}
  <script src="{{ STATIC_URL }}js/admin/forening.js"></script>
{% endblock %}

{% block body %}

  <div class="row">
    <div class="col-lg-12">
      <h1>{{ active_forening.name }} <small>endre informasjon om foreningen og se registrerte Sherpabrukere</small></h1>
      <ol class="breadcrumb">
        <li class="active"><i class="fa fa-dashboard"></i> <a href="{% url 'admin.views.index' %}">Sherpa</a></li>
        <li><a href="{% url 'admin.forening.views.index' %}">{{ active_forening.name }}</a></li>
      </ol>
    </div>
  </div><!-- /.row -->

<div class="foreningsadmin">
  <div class="row">
    <div class="col-lg-12">

      {% for message in messages %}
        {% if message.message == 'forening_save_success' %}
          <div class="alert alert-success">
            <strong>Endringene har blitt lagret!</strong><br>
          </div>
        {% endif %}
      {% endfor %}

      <form action="{% url 'admin.forening.views.index' active_forening.id %}" method="post" class="edit-forening form-default form-horizontal">
        {% csrf_token %}

        <div class="form-group{% if form.name.errors %} has-error{% endif %}">
          <label class="col-md-2 control-label" for="id_name">Forening</label>
          <div class="col-md-10">
            {{ form.name }}
            {% if form.name.errors %}
              {% for error in form.name.errors %}
                <span class="help-block error">{{ error }}</span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="form-group{% if form.type.errors %} has-error{% endif %}">
          <label class="col-md-2 control-label" for="id_type">Type</label>
          <div class="col-md-10">
            {{ form.type }}
            {% if form.type.errors %}
              {% for error in form.type.errors %}
                <span class="help-block error">{{ error }}</span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="form-group group_type{% if form.group_type.errors %} has-error{% endif %}{% if active_forening.type != 'turgruppe' %} jq-hide{% endif %}">
          <label class="col-md-2 control-label" for="id_group_type">Turgruppe</label>
          <div class="col-md-10">
            {{ form.group_type }}
            {% if form.group_type.errors %}
              {% for error in form.group_type.errors %}
                <span class="help-block error">{{ error }}</span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="section skip-border">

          <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
              <h2>Adresse</h2>
            </div>
          </div>

          <div class="form-group{% if form.post_address.errors %} has-error{% endif %}">
            <label class="col-md-2 control-label" for="id_post_address">Postadresse</label>
            <div class="col-md-10">
              {{ form.post_address }}
              {% if form.post_address.errors %}
                {% for error in form.post_address.errors %}
                  <span class="help-block error">{{ error }}</span>
                {% endfor %}
              {% endif %}
            </div>
          </div>

          <div class="form-group{% if form.visit_address.errors %} has-error{% endif %}">
            <label class="col-md-2 control-label" for="id_visit_address">Besøksadresse</label>
            <div class="col-md-10">
              {{ form.visit_address }}
              {% if form.visit_address.errors %}
                {% for error in form.visit_address.errors %}
                  <span class="help-block error">{{ error }}</span>
                {% endfor %}
              {% endif %}
            </div>
          </div>

          <div class="form-group{% if form.zipcode.errors %} has-error{% endif %}">
            <label class="col-md-2 control-label" for="id_zipcode">Postnummer / Poststed</label>
            <div class="col-md-10">
              <input type="text" class="form-control" id="id_zipcode" name="zipcode" value="{{ form.zipcode.value }}" maxlength="10">
              <input type="text" class="form-control" id="id_area" name="area" value="{{ form_zipcode_area }}" disabled>
              <img src="{{ STATIC_URL }}img/ajax-loader-small.gif" class="zipcode ajaxloader jq-hide" alt="Laster poststed...">
              {% if form.zipcode.errors %}
                {% for error in form.zipcode.errors %}
                  <span class="help-block error">{{ error }}</span>
                {% endfor %}
              {% endif %}
            </div>
          </div>

          <div class="form-group{% if form.counties.errors %} has-error{% endif %}">
            <label class="col-md-2 control-label" for="id_counties">Fylke(r)</label>
            <div class="col-md-10">
              {{ form.counties }}
              {% if form.counties.errors %}
                {% for error in form.counties.errors %}
                  <span class="help-block error">{{ error }}</span>
                {% endfor %}
              {% endif %}
            </div>
          </div>

        </div><!-- /.section -->

        <div class="form-group submit">
          <div class="col-md-offset-2 col-md-10">
            <button type="submit" class="btn btn-large">Lagre foreningsdata</button>
          </div>
        </div>

      </form>

    </div>
  </div>
</div><!-- /.foreningsadmin -->

{% endblock %}
