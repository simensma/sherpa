{% extends "admin/images/layout.html" %}
{% block extra_scripts %}
  <script src="{{ STATIC_URL }}js/admin-imagebrowser.js"></script>
{% endblock %}

{% block imagebody %}
{% if not albums and not images %}
<div class="alert alert-info">Dette albumet er tomt.</div>
{% endif %}

<div class="row">
  {% if current_album %}
  <div class="offset4 span2">
    <p><a class="btn btn-primary large-button dialog-button" data-dialog=".album-dialog" href="javascript:undefined">Opprett nytt album her</a></p>
  </div>
  <div class="span2">
    <p><a class="btn btn-primary" href="{% url admin.images.views.upload_image current_album.id %}">Last opp nytt bilde her</a></p>
  </div>
  {% else %}
  <div class="offset5 span2">
    <p><a class="btn btn-primary large-button dialog-button" data-dialog=".album-dialog" href="javascript:undefined">Opprett nytt album her</a></p>
  </div>
  {% endif %}
</div>

<div class="row">
  <div class="offset3 span6 multiedit">
    <button class="btn btn-danger dialog-button" data-dialog=".delete-dialog"><i class="icon-remove"></i> Slett valgte album/bilder</button>
    <button class="btn btn-warning dialog-button" data-dialog=".details-dialog"><i class="icon-pencil"></i> Endre detaljer for valgte album/bilder</button>
  </div>
</div>

<div id="archive-gallery">
  <ul>
  {% for album in albums %}
    <li class="album" data-id="{{ album.id }}">
      <button class="btn mark">Velg album</button>
      <a class="image" href="{% url admin.images.views.list_albums album.id %}">
        <img src="{{ STATIC_URL }}img/icons/folder.png" alt="Album: {{ album.name }}">
      </a>
      <a class="text" href="{% url admin.images.views.list_albums album.id %}">{{ album.name }}</a>
    </li>
  {% endfor %}
  {% for image in images %}
    <li class="image" data-id="{{ image.id }}">
      <button class="btn mark">Velg bilde</button>
      <a class="image" href="{% url admin.images.views.image_details image.id %}">
        <img src="http://turistforeningen.s3.amazonaws.com/images/{{ image.key }}-150" alt="{{ image.description }}">
      </a>
      {{ image.photographer }}<br>
      {{ image.width }} x {{ image.height }}
    </li>
  {% endfor %}
  </ul>
</div>
<div style="clear: both;"></div>

<div class="dialog album-dialog" data-title="Legg til album" data-width="auto">
  <form action="{% if album %}{% url admin.images.views.add_album album %}{% else %}{% url admin.images.views.add_album %}{% endif %}" method="post">
    {% csrf_token %}
    <p>Navn p√• nytt album: <input type="text" name="name"></p>
    <p><input type="submit" value="Legg til album"></p>
  </form>
</div>
{% endblock %}
